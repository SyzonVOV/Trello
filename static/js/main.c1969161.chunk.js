(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{42:function(t,e,n){},47:function(t,e,n){"use strict";n.r(e);var r,i,a,c,o,d,s,u,l,f,b,p,j,x,O=n(0),g=n.n(O),h=n(31),m=n.n(h),v=(n(42),n(4)),I=n(5),y=I.a.div(r||(r=Object(v.a)(["\n  transform: ",";\n  opacity: ",";\n"])),(function(t){return t.isPreview?"rotate(5deg)":void 0}),(function(t){return t.isHidden?0:1})),k=I.a.div(i||(i=Object(v.a)(["\n  align-items: flex-start;\n  background-color: #3179ba;\n  display: flex;\n  flex-direction: row;\n  height: 100%;\n  padding: 20px;\n  width: 100%;\n"]))),w=Object(I.a)(y)(a||(a=Object(v.a)(["\n  background-color: #ebecf0;\n  width: 300px;\n  min-height: 40px;\n  margin-right: 20px;\n  border-radius: 3px;\n  padding: 8px 8px;\n  flex-grow: 0;\n"]))),A=I.a.div(c||(c=Object(v.a)(["\n  padding: 6px 16px 12px;\n  font-weight: bold;\n"]))),C=Object(I.a)(y)(o||(o=Object(v.a)(["\n  background-color: #fff;\n  cursor: pointer;\n  margin-bottom: 0.5rem;\n  padding: 0.5rem 1rem;\n  max-width: 300px;\n  border-radius: 3px;\n  box-shadow: #091e4240 0 1px 0 0;\n"]))),S=I.a.button(d||(d=Object(v.a)(["\n  background-color: #ffffff3d;\n  border-radius: 3px;\n  border: none;\n  color: ",";\n  cursor: pointer;\n  max-width: 300px;\n  padding: 10px 12px;\n  text-align: left;\n  transition: background 85ms ease-in;\n  width: 100%;\n\n  &:hover {\n    background-color: #ffffff52;\n  }\n"])),(function(t){return t.dark?"#000":"#fff"})),T=I.a.div(s||(s=Object(v.a)(["\n  max-width: 300px;\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  align-items: flex-start;\n"]))),D=I.a.button(u||(u=Object(v.a)(["\n  background-color: #5aac44;\n  border-radius: 3px;\n  border: none;\n  box-shadow: none;\n  color: #fff;\n  padding: 6px 12px;\n  text-align: center;\n"]))),E=I.a.input(l||(l=Object(v.a)(["\n  border-radius: 3px;\n  border: none;\n  box-shadow: #091e4240 0 1px 0 0;\n  margin-bottom: 0.5rem;\n  padding: 0.5rem 1rem;\n  width: 100%;\n"]))),L=I.a.div(f||(f=Object(v.a)(["\n  height: 100%;\n  left: 0;\n  pointer-events: none;\n  position: fixed;\n  top: 0;\n  width: 100%;\n  z-index: 100;\n"]))),M=I.a.div.attrs((function(t){var e=t.position,n=e.x,r=e.y;return{style:{transform:"translate(".concat(n,"px, ").concat(r,"px)")}}}))(b||(b=Object(v.a)([""]))),_=Object(I.b)(p||(p=Object(v.a)(["\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n"]))),P=I.a.div(j||(j=Object(v.a)(["\n  display: flex;\n  \n  width: 100vw;\n  height: 100vh;\n  \n  align-items: center;\n  justify-content: center;\n"]))),R=I.a.div(x||(x=Object(v.a)(["\n  animation: "," 1s linear infinite;\n  transform: translateZ(0);\n\n  border-top: 2px solid hsl(190deg 70% 80%);;\n  border-right: 2px solid hsl(190deg 70% 80%);;\n  border-bottom: 2px solid hsl(190deg 70% 80%);\n  border-left: 4px solid hsl(190deg 60% 40%);\n  background: transparent;\n  width: 50px;\n  height: 50px;\n  border-radius: 50%;\n"])),_),B=n(8),N=n(3),G=n(56),K=n(17),U=n(37),V=n(57),H=(n(13),function(t,e){return t.findIndex((function(t){return t.id===e}))});var J=function(t,e){switch(e.type){case"ADD_LIST":t.lists.push({id:Object(V.a)(),text:e.payload,tasks:[]});break;case"ADD_TASK":var n=e.payload,r=n.text,i=n.listId,a=H(t.lists,i);t.lists[a].tasks.push({id:Object(V.a)(),text:r});break;case"MOVE_LIST":var c=e.payload,o=c.draggedId,d=c.hoverId,s=H(t.lists,o),u=H(t.lists,d);t.lists=function(t,e,n){var r=n<0?t.length+n:n,i=t.splice(e,1)[0];return t.splice(r,0,i),t}(t.lists,s,u);break;case"MOVE_TASK":var l=e.payload,f=l.draggedItemId,b=l.hoveredItemId,p=l.sourceColumnId,j=l.targetColumnId,x=H(t.lists,p),O=H(t.lists,j),g=H(t.lists[x].tasks,f),h=b?H(t.lists[O].tasks,b):0,m=t.lists[x].tasks[g];t.lists[x].tasks.splice(g,1),t.lists[O].tasks.splice(h,0,m);break;case"SET_DRAGGED_ITEM":t.draggedItem=e.payload}},z=n(25),Z=n.n(z),q=n(35),F=n(2),Q={lists:[{id:"0",text:"To Do",tasks:[{id:"c0",text:"Generate app scaffold"}]},{id:"1",text:"In Progress",tasks:[{id:"c2",text:"Learn Typescript"}]},{id:"2",text:"Done",tasks:[{id:"c3",text:"Begin to use static typing"}]}],draggedItem:null};var W,X=Object(O.createContext)({}),Y=(W=function(t){var e=t.children,n=t.initialState,r=Object(U.a)(J,n),i=Object(N.a)(r,2),a=i[0],c=i[1],o=a.draggedItem,d=a.lists;return Object(O.useEffect)((function(){var t;t=a,fetch("".concat("http://localhost:4000","/save"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(t){if(t.ok)return t.json();throw new Error("Error while saving the state.")})).catch((function(t){console.log(t)}))}),[a]),Object(F.jsx)(X.Provider,{value:{draggedItem:o,lists:d,getTasksByListId:function(t){var e;return(null===(e=d.find((function(e){return e.id===t})))||void 0===e?void 0:e.tasks)||[]},dispatch:c},children:e})},function(t){var e=Object(O.useState)({lists:[],draggedItem:null}),n=Object(N.a)(e,2),r=n[0],i=n[1],a=Object(O.useState)(!0),c=Object(N.a)(a,2),o=c[0],d=c[1],s=Object(O.useState)(),u=Object(N.a)(s,2),l=u[0];return u[1],Object(O.useEffect)((function(){!function(){var t=Object(q.a)(Z.a.mark((function t(){var e;return Z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat("http://localhost:4000","/load")).then((function(t){if(t.ok)return t.json();throw new Error("Error while loading the state.")}));case 3:e=t.sent,i(e),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),i(Q);case 10:d(!1);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}()()}),[]),o?Object(F.jsx)(P,{children:Object(F.jsx)(R,{})}):l?Object(F.jsx)("div",{children:l.message}):Object(F.jsx)(W,Object(B.a)(Object(B.a)({},t),{},{initialState:r}))}),$=function(){return Object(O.useContext)(X)},tt=function(t,e,n,r){return Boolean(!r&&t&&t.type===e&&t.id===n)},et=n(55),nt=n(29),rt=function(t){return{type:"SET_DRAGGED_ITEM",payload:t}},it=function(t,e,n,r){return{type:"MOVE_TASK",payload:{draggedItemId:t,hoveredItemId:e,sourceColumnId:n,targetColumnId:r}}},at=function(t){var e=$().dispatch,n=Object(et.a)({type:t.type,item:function(){return e(rt(t)),t},end:function(){return e(rt(null))}}),r=Object(N.a)(n,3),i=r[1],a=r[2];return Object(O.useEffect)((function(){a(Object(nt.a)(),{captureDraggingState:!0})}),[a]),{drag:i}},ct=function(t){var e=t.text,n=t.id,r=t.columnId,i=t.isPreview,a=$(),c=a.draggedItem,o=a.dispatch,d=Object(O.useRef)(null),s=at({type:"CARD",id:n,text:e,columnId:r}).drag,u=Object(G.a)({accept:"CARD",hover:Object(K.a)(200,(function(){c&&"CARD"===c.type&&c.id!==n&&(o(it(c.id,n,c.columnId,r)),o(rt(Object(B.a)(Object(B.a)({},c),{},{columnId:r}))))}))});return s((0,Object(N.a)(u,2)[1])(d)),Object(F.jsx)(C,{isHidden:tt(c,"CARD",n,i),isPreview:i,ref:d,children:e})},ot=function(t){var e=t.onAdd,n=Object(O.useState)(""),r=Object(N.a)(n,2),i=r[0],a=r[1],c=function(){var t=Object(O.useRef)(null);return Object(O.useLayoutEffect)((function(){var e;null===(e=t.current)||void 0===e||e.focus()})),t}();return Object(F.jsxs)(T,{children:[Object(F.jsx)(E,{ref:c,value:i,onChange:function(t){return a(t.target.value)},onKeyPress:function(t){"Enter"===t.key&&e(i)}}),Object(F.jsx)(D,{onClick:function(){return e(i)},children:"Create"})]})},dt=function(t){var e=Object(O.useState)(!1),n=Object(N.a)(e,2),r=n[0],i=n[1],a=t.onAdd,c=t.toggleButtonText,o=t.dark;return r?Object(F.jsx)(ot,{onAdd:function(t){a(t),i(!1)}}):Object(F.jsx)(S,{dark:o,onClick:function(){return i(!0)},children:c})},st=function(t){var e=t.text,n=t.id,r=t.isPreview,i=$(),a=i.draggedItem,c=i.getTasksByListId,o=i.dispatch,d=c(n),s=Object(O.useRef)(null),u=Object(G.a)({accept:["COLUMN","CARD"],hover:Object(K.a)(200,(function(){if(a)if("COLUMN"===a.type){if(a.id===n)return;o({type:"MOVE_LIST",payload:{draggedId:a.id,hoverId:n}})}else{if(a.columnId===n)return;if(d.length)return;o(it(a.id,null,a.columnId,n)),o(rt(Object(B.a)(Object(B.a)({},a),{},{columnId:n})))}}))}),l=Object(N.a)(u,2)[1];return(0,at({type:"COLUMN",id:n,text:e}).drag)(l(s)),Object(F.jsxs)(w,{ref:s,isPreview:r,isHidden:tt(a,"COLUMN",n,r),children:[Object(F.jsx)(A,{children:e}),d.map((function(t){return Object(F.jsx)(ct,{columnId:n,text:t.text,id:t.id},t.id)})),Object(F.jsx)(dt,{toggleButtonText:"+ Add another card",onAdd:function(t){return o(function(t,e){return{type:"ADD_TASK",payload:{text:t,listId:e}}}(t,n))},dark:!0})]})},ut=n(53),lt=function(){var t=$().draggedItem,e=Object(ut.a)((function(t){return{currentOffset:t.getSourceClientOffset()}})).currentOffset;return t&&e?Object(F.jsx)(L,{children:Object(F.jsx)(M,{position:e,children:"COLUMN"===t.type?Object(F.jsx)(st,{id:t.id,text:t.text,isPreview:!0}):Object(F.jsx)(ct,{columnId:t.columnId,isPreview:!0,id:t.id,text:t.text})})}):null},ft=function(){var t=$(),e=t.lists,n=t.dispatch;return Object(F.jsxs)(k,{children:[Object(F.jsx)(lt,{}),e.map((function(t){return Object(F.jsx)(st,{text:t.text,id:t.id},t.id)})),Object(F.jsx)(dt,{toggleButtonText:"+ Add another list",onAdd:function(t){return n(function(t){return{type:"ADD_LIST",payload:t}}(t))}})]})},bt=n(23),pt=n(54);m.a.render(Object(F.jsx)(g.a.StrictMode,{children:Object(F.jsx)(pt.a,{backend:bt.a,children:Object(F.jsx)(Y,{children:Object(F.jsx)(ft,{})})})}),document.getElementById("root"))}},[[47,1,2]]]);
//# sourceMappingURL=main.c1969161.chunk.js.map